type: ACTION
action-type: CHANGECONTROL_CUSTOM
language: PYTHON_3
name: Push Secondary Cluster Token
description: Retrieves the secondary cluster token and stages it in /tmp/secondary-token on the device awaiting TerminAttr to restart.
file: script.py
static-params: []
dynamic-params:
  - name: DeviceID
    description: The ID of the device to run this script against
    required: true
    hidden: false
  - name: backup_cvp_1
    description: Backup Cluster Node 1
    required: true
    hidden: false
    default: "10.88.160.57"
  - name: backup_cvp_2
    description: Backup Cluster Node 2
    required: false
    hidden: false
    default: ""
  - name: backup_cvp_3
    description: Backup Cluster Node 3
    required: false
    hidden: false
    default: ""
  - name: expiry
    description: Time permitted for TerminAttr to complete certificate based enrollment with the secondary cluster.
    required: true
    hidden: false
    default: "1h"
  - name: filename
    description: Filename of where the token will be stored on the switch filesystem.
    required: true
    hidden: true
    default: "/tmp/secondary-token"
  - name: auth
    description: API Service Account Token for authenticating to the secondary cluster
    default: "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJkaWQiOjcxMzk4NzM5MjY4NjczMjA5ODEsImRzbiI6ImN2cC1wcmltYXJ5IiwiZHN0IjoiYWNjb3VudCIsImV4cCI6MTY5NjE1ODA0NiwiaWF0IjoxNjY0ODgxMjY5LCJzaWQiOiJhZDFlZjg0NGUzMDQwNDRiOTc3ZjUzYjE5NWQyMjJhMGUwYzU0MTc3NmRmZDMwMGVhMTNjNDFjMTg3ZTliNzBlLTRrcEJzZW9sazNnUjdVSzlacUt6ODJVcUFNVmFDaEZvQUpLaGhsUFkifQ.k1MUVEbNAeB3slLuI7UJi-RZ-15xKM-ZS9a_3cr8XF190mbrw9L-jUv94_RobPnl34G54-lX_GP1gR0aPbCPA6tEi7Qg0t7WcKlwRNdBoSteqOZqURnA5HPRWJyAg4AnYySZ-R28RJ9qwZQsmu4hVqQreU3EpxkwU_lb9dRM-YgTiVV-1Yje3BGTKrNDVW4LclHt63KUwnCHzyafVR6DQO65M1Si-8jIjgzvlqcbbxW3ZkVvMDQA2jXgBmTMI-GeRTKMVKE1d5pbJWXhsEsl_8CzP2bIOtEbNzmzLzEPcbPHQ4TGGZ_UNichmQlhNfxmthj6MlHZY74v6T1rain2qBKa-B9y1jJ4_nc8ZiNL74VNJw9SKA760-BgfRJK9pEuIbz9vSqb1aB5U4e6UMwBxX-gUEH2qbPG4lPX6h26B47vXwRwCIADPfzipywOiL87XNITQ84l4Ka9NCQr3Dlr3UVboC_3BfAMcOi_d9deSk20h5plYO1FC3YxgZS3PA9ArsLsKV7sSJjxCiYu0smHnDy4mUtWxehP7flqrSZ-5X0qNSuZDCzmnBHggbpsaZ8bgJjmZZ6_TKqgasaoNEoEt0H4qoDXRaoOT5K0TMFi_lBfaiX-9tc7obwFNWfBqBsILccmmmGK1UUw-4if7FJYxP4W0xeSN9sFT8vRvALxi44"
    required: true
    hidden: true

